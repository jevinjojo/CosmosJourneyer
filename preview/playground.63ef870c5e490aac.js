/*
 *  This file is part of Cosmos Journeyer
 *
 *  Copyright (C) 2024 Barthélemy Paléologue <barth.paleologue@cosmosjourneyer.com>
 *
 *  This program is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published by
 *  the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

(()=>{"use strict";var e={42615:function(e,t,n){e.exports=n.p+"e11ee3cdd6bf505e.webp"},15788:function(e,t,n){e.exports=n.p+"ceb0939a515e507b.webp"},30369:function(e,t,n){e.exports=n.p+"a818b763cab42c30.webp"},14221:function(e,t,n){e.exports=n.p+"2470ffe0b50b2171.webp"},80247:function(e,t,n){n.d(t,{Yn:()=>i});var r=n(78479),a=n(29375),o=a.Dx;function i(e,t){return(0,a.bw)(e,t)}var c=r.z.object({manual:r.z.array(r.z.record(r.z.string(),r.z.unknown())),auto:r.z.array(r.z.record(r.z.string(),r.z.unknown()))});c.extend({manual:r.z.array(o),auto:r.z.array(o)}),r.z.record(r.z.string().uuid(),c)},32133:function(e,t,n){n.d(t,{b:()=>a}),n(32075);var r,a=((r={}).INVALID_JSON="INVALID_JSON",r.INVALID_SAVE="INVALID_SAVE",r.INVALID_STORAGE_FORMAT="INVALID_STORAGE_FORMAT",r)},70541:function(e,t,n){n.d(t,{vG:()=>d});var r=n(85737),a=n(16585),o=n(76473),i=(0,a.c)(o.Z.POWER_PLAY_SEED),c=0,s=(0,r.makeNoise3D)(function(){return i(c++)}),u=(0,a.c)(o.Z.POWER_PLAY_SEED+598),l=0,f=(0,r.makeNoise3D)(function(){return u(l++)});function d(e){var t,n;return{materialistSpiritualist:(t=e.x,.5*s(.2*t,.2*e.y,.2*e.z)+.5),capitalistCommunist:(n=e.x,.5*f(.2*n,.2*e.y,.2*e.z)+.5)}}},48678:function(e,t,n){n.d(t,{V:()=>r});var r=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function")}return e=[{key:"play",value:function(){}},{key:"setVolume",value:function(){}},{key:"setMaskFactor",value:function(){}},{key:"getMask",value:function(){return 0}},{key:"dispose",value:function(){}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}()},54530:function(e,t,n){n.d(t,{cV:()=>i,k6:()=>o});var r,a=n(48678),o=((r={})[r.CLICK=0]="CLICK",r[r.HOVER=1]="HOVER",r[r.SUCCESS=2]="SUCCESS",r[r.ERROR=3]="ERROR",r[r.WARNING=4]="WARNING",r[r.INFO=5]="INFO",r[r.ENABLE_ORBIT_DISPLAY=6]="ENABLE_ORBIT_DISPLAY",r[r.DISABLE_ORBIT_DISPLAY=7]="DISABLE_ORBIT_DISPLAY",r[r.TARGET_LOCK=8]="TARGET_LOCK",r[r.TARGET_UNLOCK=9]="TARGET_UNLOCK",r[r.ITINERARY_COMPUTED=10]="ITINERARY_COMPUTED",r[r.OPEN_PAUSE_MENU=11]="OPEN_PAUSE_MENU",r[r.ENABLE_WARP_DRIVE=12]="ENABLE_WARP_DRIVE",r[r.DISABLE_WARP_DRIVE=13]="DISABLE_WARP_DRIVE",r[r.ACCELERATING_WARP_DRIVE=14]="ACCELERATING_WARP_DRIVE",r[r.DECELERATING_WARP_DRIVE=15]="DECELERATING_WARP_DRIVE",r[r.HYPER_SPACE=16]="HYPER_SPACE",r[r.THRUSTER=17]="THRUSTER",r),i=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function")}return e=[{key:"playNow",value:function(){}},{key:"enqueuePlay",value:function(){}},{key:"createInstance",value:function(){return new a.V}},{key:"freeInstance",value:function(){}},{key:"setInstanceMask",value:function(){}},{key:"update",value:function(){}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}()},4761:function(e,t,n){n.d(t,{bM:()=>o,eU:()=>i,jH:()=>c});var r,a,o=((r={})[r.CHARLOTTE=0]="CHARLOTTE",r),i=((a={})[a.INITIATING_PLANETARY_LANDING=0]="INITIATING_PLANETARY_LANDING",a[a.LANDING_REQUEST_GRANTED=1]="LANDING_REQUEST_GRANTED",a[a.LANDING_COMPLETE=2]="LANDING_COMPLETE",a[a.MISSION_COMPLETE=3]="MISSION_COMPLETE",a[a.NEW_DISCOVERY=4]="NEW_DISCOVERY",a[a.CANNOT_ENGAGE_WARP_DRIVE=5]="CANNOT_ENGAGE_WARP_DRIVE",a[a.WARP_DRIVE_EMERGENCY_SHUT_DOWN=6]="WARP_DRIVE_EMERGENCY_SHUT_DOWN",a[a.WARP_DRIVE_DISENGAGED=7]="WARP_DRIVE_DISENGAGED",a[a.ENGAGING_WARP_DRIVE=8]="ENGAGING_WARP_DRIVE",a[a.FUEL_SCOOPING=9]="FUEL_SCOOPING",a[a.FUEL_SCOOPING_COMPLETE=10]="FUEL_SCOOPING_COMPLETE",a),c=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function")}return e=[{key:"sayNow",value:function(){}},{key:"enqueueSay",value:function(){}},{key:"update",value:function(){}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}()},14280:function(e,t,n){n.d(t,{Iu:()=>i,QB:()=>p,Sf:()=>u,Sl:()=>b,U1:()=>c,cs:()=>f,fx:()=>y,gM:()=>d,jw:()=>s,nA:()=>l,tW:()=>m});var r=n(49226),a=n(51971),o=n(42933);function i(e,t){e.setAbsolutePosition(e.getAbsolutePosition().add(t)),e.computeWorldMatrix(!0)}function c(e,t,n){e.rotate(t,n,r.T.WORLD)}function s(e){if(null===e.rotationQuaternion)throw Error("Null quaternion for ".concat(e.name));return e.rotationQuaternion}function u(e,t){e.rotationQuaternion=t,e.computeWorldMatrix(!0)}function l(e,t){if(!t.equalsWithEpsilon(e.up,1e-7)){var n=e.up;c(e,a.P.Cross(t,n),-Math.acos(a.P.Dot(t,n)))}}function f(e){return e.getDirection(o.F.FORWARD)}function d(e){return e.getDirection(o.F.UP)}function p(e){return h(e).negate()}function h(e){return e.getDirection(o.F.LEFT)}function b(e,t){c(e,f(e),t)}function m(e,t){c(e,h(e),t)}function y(e,t){c(e,d(e),t)}},91010:function(e,t,n){n.d(t,{P8:()=>a,Wl:()=>i,ZX:()=>o});var r=n(51971);function a(e,t){for(var n=Math.floor(e.length/16),r=Math.floor(n/t),a=new Float32Array(16*r),o=0;o<r;o++){var i=16*Math.floor(Math.random()*n);a.set(e.subarray(i,i+16),16*o)}return a}function o(e,t,n,a){for(var o=new Float32Array(n*n*16),i=t/n,c=0,s=0;s<n;s++)for(var u=0;u<n;u++){var l=a()*i,f=a()*i,d=e.x+s*i-t/2+l,p=e.z+u*i-t/2+f,h=.7+.6*a();r.y3.Compose(new r.P(h,h,h),r._f.RotationAxis(r.P.Up(),2*a()*Math.PI),new r.P(d,0,p)).copyToArray(o,16*c),c+=1}return o}function i(e,t,n,a){if(void 0===e[0]||void 0===e[1]||void 0===e[2]||void 0===e[3]||void 0===e[4]||void 0===e[5]||void 0===e[6]||void 0===e[7]||void 0===e[8]||void 0===e[9]||void 0===e[10]||void 0===e[11]||void 0===e[12]||void 0===e[13]||void 0===e[14]||void 0===e[15])throw Error("Matrix is not defined");t.set(e[12],e[13],e[14]);var o=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);a.set(o,o,o);var i=r.y3.Identity();i.setRowFromFloats(0,e[0]/o,e[1]/o,e[2]/o,0),i.setRowFromFloats(1,e[4]/o,e[5]/o,e[6]/o,0),i.setRowFromFloats(2,e[8]/o,e[9]/o,e[10]/o,0),i.setRowFromFloats(3,0,0,0,1),n.copyFrom(r._f.FromRotationMatrix(i))}},18722:function(e,t,n){n.a(e,async function(e,t){try{n(41808),n(447);var r,a=n(9844),o=n(96775),i=n(92198),c=document.getElementById("renderer");c.width=window.innerWidth,c.height=window.innerHeight;var s=new o.a(c),u=new a.Engine(c,!0);u.useReverseDepthBuffer=!0,u.loadingScreen=s,u.displayLoadingUI();var l=new URLSearchParams(window.location.search),f=null!=(r=l.get("scene"))?r:"",d=new i.j().get(f),p=await d(u,function(e,t){s.setProgressPercentage(100*e),s.loadingUIText=t});if(window.scene=p,null!==l.get("debug")){var h=document.createElement("div");document.body.appendChild(h),h.id="inspectorLayer",await p.debugLayer.show({globalRoot:h})}if(null!==l.get("physicsViewer")){var b=new a.PhysicsViewer(p);p.onBeforeRenderObservable.add(function(){var e=!0,t=!1,n=void 0;try{for(var r,a=p.meshes[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value.physicsBody;o&&b.showBody(o)}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}})}var m=l.get("freeze"),y=Number(m);if(null!==m&&!isNaN(y)){var v=0;p.onAfterRenderObservable.add(function(){if(++v>=y){u.stopRenderLoop(),c.dataset.frozen="1";return}})}p.onAfterRenderObservable.addOnce(function(){c.dataset.ready="1"}),p.executeWhenReady(function(){u.loadingScreen.hideLoadingUI(),u.runRenderLoop(function(){p.render()})}),window.addEventListener("resize",function(){c.width=window.innerWidth,c.height=window.innerHeight,u.resize(!0)}),document.addEventListener("keypress",function(e){"p"===e.key&&null!==p.activeCamera&&a.Tools.CreateScreenshot(u,p.activeCamera,{precision:1})}),window.scene=p,t()}catch(e){t(e)}},1)},92198:function(e,t,n){n.d(t,{j:()=>nu});var r=n(9844),a=n(57947),o=n(55104),i=n(77054);function c(e,t){var n,c=new r.Scene(e);c.useRightHandedSystem=!0;var s=new URLSearchParams(window.location.search),u=new r.ArcRotateCamera("ArcRotateCamera",0,3.14/3,30,r.Vector3.Zero(),c);u.attachControl(),u.lowerRadiusLimit=.5,u.wheelPrecision*=100,u.minZ=.01;var l=c.enableDepthRenderer(null,!1,!0),f=(0,a.c)("juliaSet",Number(null!=(n=s.get("seed"))?n:1e5*Math.random()),"Julia Set",[]),d=new i.W(f,c);d.getTransform().scalingDeterminant=1e-5;var p=new o.v(d.getTransform(),d.getBoundingRadius(),f.accentColor,c,[]);return c.cameras.forEach(function(e){return e.attachPostProcess(p)}),c.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(p)}),c.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;p.update(t)}),c.onBeforeCameraRenderObservable.add(function(e){l.getDepthMap().activeCamera=e}),t(1,"Loading complete"),Promise.resolve(c)}var s=n(25178),u=n(20678);function l(e,t){var n,a=new r.Scene(e);a.useRightHandedSystem=!0;var o=new URLSearchParams(window.location.search),c=new r.ArcRotateCamera("ArcRotateCamera",0,3.14/3,5,r.Vector3.Zero(),a);c.attachControl(),c.lowerRadiusLimit=.5,c.wheelPrecision*=100,c.minZ=.01;var l=a.enableDepthRenderer(null,!1,!0),f=(0,s.i)("mandelbox",Number(null!=(n=o.get("seed"))?n:1e5*Math.random()),"Mandelbox",[]),d=new i.W(f,a);d.getTransform().scalingDeterminant=1e-5;var p=new u.m(d.getTransform(),d.getBoundingRadius(),f,a,[]);return a.cameras.forEach(function(e){return e.attachPostProcess(p)}),a.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(p)}),a.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;p.update(t)}),a.onBeforeCameraRenderObservable.add(function(e){l.getDepthMap().activeCamera=e}),t(1,"Loading complete"),Promise.resolve(a)}var f=n(76106),d=n(75122);function p(e,t){var n,a=new r.Scene(e);a.useRightHandedSystem=!0;var o=new URLSearchParams(window.location.search),c=new r.ArcRotateCamera("ArcRotateCamera",0,3.14/3,30,r.Vector3.Zero(),a);c.attachControl(),c.lowerRadiusLimit=.5,c.wheelPrecision*=100,c.minZ=.01;var s=a.enableDepthRenderer(null,!1,!0),u=(0,f.i)("mandelbulb",Number(null!=(n=o.get("seed"))?n:1e5*Math.random()),"Mandelbulb",[]),l=new i.W(u,a);l.getTransform().scalingDeterminant=1e-5;var p=new d.C(l.getTransform(),l.getBoundingRadius(),u,a,[]);return a.cameras.forEach(function(e){return e.attachPostProcess(p)}),a.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(p)}),a.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;p.update(t)}),a.onBeforeCameraRenderObservable.add(function(e){s.getDepthMap().activeCamera=e}),t(1,"Loading complete"),Promise.resolve(a)}var h=n(97343),b=n(59209);function m(e,t){var n,a=new r.Scene(e);a.useRightHandedSystem=!0;var o=new URLSearchParams(window.location.search),c=new r.ArcRotateCamera("ArcRotateCamera",0,3.14/3,5,r.Vector3.Zero(),a);c.attachControl(),c.lowerRadiusLimit=.5,c.wheelPrecision*=100,c.minZ=.01;var s=a.enableDepthRenderer(null,!1,!0),u=(0,h.$)("mengerSponge",Number(null!=(n=o.get("seed"))?n:1e5*Math.random()),"Menger Sponge",[]),l=new i.W(u,a);l.getTransform().scalingDeterminant=1e-5;var f=new b.x(l.getTransform(),l.getBoundingRadius(),u,a,[]);return a.cameras.forEach(function(e){return e.attachPostProcess(f)}),a.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(f)}),a.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;f.update(t)}),a.onBeforeCameraRenderObservable.add(function(e){s.getDepthMap().activeCamera=e}),t(1,"Loading complete"),Promise.resolve(a)}var y=n(51056),v=n(48757);function g(e,t){var n,a=new r.Scene(e);a.useRightHandedSystem=!0;var o=new URLSearchParams(window.location.search),c=new r.ArcRotateCamera("ArcRotateCamera",0,3.14/3,5,r.Vector3.Zero(),a);c.attachControl(),c.lowerRadiusLimit=.5,c.wheelPrecision*=100,c.minZ=.01;var s=a.enableDepthRenderer(null,!1,!0),u=(0,y.q)("sierpinski",Number(null!=(n=o.get("seed"))?n:1e5*Math.random()),"Sierpinski Pyramid",[]),l=new i.W(u,a);l.getTransform().scalingDeterminant=1e-5;var f=new v.U(l.getTransform(),l.getBoundingRadius(),u,a,[]);return a.cameras.forEach(function(e){return e.attachPostProcess(f)}),a.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(f)}),a.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;f.update(t)}),a.onBeforeCameraRenderObservable.add(function(e){s.getDepthMap().activeCamera=e}),t(1,"Loading complete"),Promise.resolve(a)}var w=n(1858),T=n(98201),P=n(93019),R=n(82866);n(14199);var A=n(51971),S=n(64428),x=n(72392);function E(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function C(e){return I.apply(this,arguments)}function I(){var e;return e=function(e){var t,n,r,a,o,i,c=arguments;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(s){switch(s.label){case 0:if(t=c.length>1&&void 0!==c[1]?c[1]:A.P.Zero(),n=c.length>2?c[2]:void 0,a=S.a.bind,o=[void 0,!0],null==n)return[3,1];return i=n,[3,3];case 1:return[4,(0,x.Z)()];case 2:i=s.sent(),s.label=3;case 3:return r=new(a.apply(S.a,o.concat([i]))),e.enablePhysics(t,r),[2,r]}})},(I=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){E(o,r,a,i,c,"next",e)}function c(e){E(o,r,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}function O(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function _(e,t){return k.apply(this,arguments)}function k(){var e;return e=function(e,t){var n,a,o,i,c,s,u;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(l){switch(l.label){case 0:return(n=new r.Scene(e)).useRightHandedSystem=!0,[4,C(n)];case 1:return l.sent(),(o=(a=new T.Q(n)).getActiveCamera()).attachControl(),n.enableDepthRenderer(o,!1,!0),[4,(0,w.v)(function(e,n,r){t(e/n,"Loading ".concat(r))},n)];case 2:return i=l.sent(),new r.DirectionalLight("sun",new r.Vector3(1,-1,0),n).intensity=.7,new r.HemisphericLight("hemi",r.Vector3.Up(),n).intensity=.4,a.getTransform().position.z=-6e4,a.getTransform().position.y=2500,a.speed*=500,o.maxZ*=500,c=r.MeshBuilder.CreateSphere("sphere",{diameter:1e4},n),new r.PhysicsAggregate(c,r.PhysicsShapeType.SPHERE,{mass:0},n),R.c.BATCH_SIZE=1e4,s=new P.K(42,c,45e3,75e3,n),(u=r.MeshBuilder.CreateTorus("torus",{diameter:1e5,thickness:2e4,tessellation:32},n)).visibility=.1,u.parent=c,u.scaling.y=2e-4,n.onBeforeRenderObservable.add(function(){a.update(e.getDeltaTime()/1e3),s.update(a.getTransform().getAbsolutePosition(),i.objects,e.getDeltaTime()/1e3)}),[2,n]}})},(k=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){O(o,r,a,i,c,"next",e)}function c(e){O(o,r,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}var L=n(3895),D=n(6999),M=n(30017);function N(e,t){var n=new L.x(e);n.useRightHandedSystem=!0;var a=new T.Q(n),o=a.getActiveCamera();a.speed=6e6,o.maxZ*=6e6,a.getTransform().setAbsolutePosition(new r.Vector3(0,1,-2).scaleInPlace(6e6)),a.getTransform().lookAt(r.Vector3.Zero()),o.attachControl(),n.enableDepthRenderer(null,!1,!0);var i=new r.PointLight("light1",new r.Vector3(6e7,0,0),n),c=r.MeshBuilder.CreateSphere("sphere",{diameter:12e6,segments:64},n),s=new D.r(6e6,1e5),u=new M.C(c,6e6,s,[i],n);return o.attachPostProcess(u),n.onBeforeRenderObservable.add(function(){var e=n.getEngine().getDeltaTime()/1e3;a.update(e);var t=a.getTransform().position.clone();a.getTransform().position=r.Vector3.Zero(),c.position.subtractInPlace(t)}),t(1,"Rings scene loaded"),Promise.resolve(n)}var j=n(67975),B=n(78626),V=n(84787),Z=n(54530),U=n(71631),G=n(43161),H=n(76473);function W(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function F(e,t){return z.apply(this,arguments)}function z(){var e;return e=function(e,t){var n,a,o,i,c,s,u,l;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(f){switch(f.label){case 0:return(n=new L.x(e)).useRightHandedSystem=!0,[4,C(n)];case 1:return f.sent(),[4,(0,w.v)(function(e,n,r){t(e/n,"Loading ".concat(r))},n)];case 2:return a=f.sent(),o=new Z.cV,(i=U.O.CreateDefault(n,a,o)).getTransform().position.copyFromFloats((0,B.randRange)(-50,50,Math.random,0),(0,B.randRange)(30,50,Math.random,0),(0,B.randRange)(-50,50,Math.random,0)),i.getTransform().rotationQuaternion=r.Quaternion.Random().normalize(),(c=new T.Q(n)).getTransform().position.copyFromFloats(0,10,-50),c.speed*=10,(s=c.getActiveCamera()).minZ=.1,s.attachControl(),new V.X(42,G.g.SMALL,a,n),(u=r.MeshBuilder.CreateBox("ground",{width:100,height:1,depth:100},n)).position.y=-2,u.position.x=75,(l=new r.PhysicsAggregate(u,r.PhysicsShapeType.BOX,{mass:0},n)).shape.filterMembershipMask=H.k.ENVIRONMENT,l.shape.filterCollideMask=H.k.DYNAMIC_OBJECTS,new j.e("hemi",A.P.Up(),n).intensity=.7,i.engageSurfaceLanding(u),n.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;i.update(t),c.update(t)}),[2,n]}})},(z=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){W(o,r,a,i,c,"next",e)}function c(e){W(o,r,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}var q=n(78681),Q=n(52653);function Y(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function X(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Y(o,r,a,i,c,"next",e)}function c(e){Y(o,r,a,i,c,"throw",e)}i(void 0)})}}function J(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}function $(e,t){return K.apply(this,arguments)}function K(){return(K=X(function(e,t){var n,a,o,i,c,s,u,l,f;return J(this,function(d){switch(d.label){case 0:return(a=new L.x(e)).useRightHandedSystem=!0,[4,C(a,new A.P(0,-9.81,0))];case 1:return d.sent(),null==(n=e.getRenderingCanvas())||n.addEventListener("click",X(function(){var t;return J(this,function(n){switch(n.label){case 0:return[4,null==(t=e.getRenderingCanvas())?void 0:t.requestPointerLock()];case 1:return n.sent(),[2]}})})),[4,(0,w.v)(function(e,n,r){t(e/n,"Loading ".concat(r))},a)];case 2:var p,h;if(o=d.sent(),(i=new r.DirectionalLight("dir01",new A.P(1,-2,-1),a)).position=new A.P(5,5,5).scaleInPlace(10),new r.HemisphericLight("hemi",new A.P(0,1,0),a).intensity=.5,(c=new r.ShadowGenerator(1024,i)).useBlurExponentialShadowMap=!0,p=s=o.objects.character.instantiateHierarchy(null),null!=(h=r.AbstractMesh)&&"undefined"!=typeof Symbol&&h[Symbol.hasInstance]?!h[Symbol.hasInstance](p):!(p instanceof h))throw Error("Character object is null");return(u=new q.J(s,a)).getTransform().position.y=30,u.getActiveCamera().attachControl(),Q.V.setEnabled(!0),c.addShadowCaster(u.character),l=r.MeshBuilder.CreateIcoSphere("ground",{radius:20},a),new r.PhysicsAggregate(l,r.PhysicsShapeType.MESH,{mass:0},a),(f=new r.PBRMetallicRoughnessMaterial("groundMaterial",a)).baseColor=new r.Color3(.5,.5,.5),l.material=f,l.receiveShadows=!0,u.setClosestWalkableObject({getTransform:function(){return l}}),a.onBeforeRenderObservable.add(function(){if(u.getActiveCamera()!==a.activeCamera){null==(t=a.activeCamera)||t.detachControl();var t,n=u.getActiveCamera();n.attachControl(),a.activeCamera=n}var r=e.getDeltaTime()/1e3;u.update(r)}),[2,a]}})})).apply(this,arguments)}var ee=n(50137),et=n(19663),en=n(14373);function er(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function ea(e,t){return eo.apply(this,arguments)}function eo(){var e;return e=function(e,t){var n,a,o,i,c,s;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(u){switch(u.label){case 0:return(n=new r.Scene(e)).useRightHandedSystem=!0,[4,(0,et.j)(function(e,n,r){t(e/n,"Loading ".concat(r))},n)];case 1:return a=u.sent(),n.environmentTexture=a.environment.milkyWay,(i=(o=new T.Q(n)).getActiveCamera()).attachControl(),n.enableDepthRenderer(),new r.HemisphericLight("light1",new r.Vector3(0,1,0),n).intensity=.7,o.speed=s=(c=new en.c((0,ee.C)([]),n)).getBoundingRadius(),i.maxZ*=s,o.getTransform().setAbsolutePosition(new r.Vector3(0,1,-2).scaleInPlace(s)),o.getTransform().lookAt(r.Vector3.Zero()),n.onBeforeRenderObservable.add(function(){var e=n.getEngine().getDeltaTime()/1e3;o.update(e);var t=o.getTransform().position.clone();o.getTransform().position=r.Vector3.Zero(),c.getTransform().position.subtractInPlace(t)}),t(1,"Rings scene loaded"),[2,n]}})},(eo=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){er(o,r,a,i,c,"next",e)}function c(e){er(o,r,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}function ei(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ec(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function es(e,t){return eu.apply(this,arguments)}function eu(){var e;return e=function(e,t){var n,a,o,i,c,s,u,l,f,d,p,h,b,m,y,v,g,T,P,R,S,x,E,I,O;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(_){switch(_.label){case 0:return(n=new L.x(e)).useRightHandedSystem=!0,[4,C(n)];case 1:return _.sent(),[4,(0,w.v)(function(e,n,r){t(e/n,"Loading ".concat(r))},n)];case 2:_.sent(),(a=new r.FreeCamera("camera",new A.P(0,1,-1).scale(15),n)).setTarget(A.P.Zero()),a.attachControl(),new r.PointLight("light",new A.P(0,100,-10),n),new j.e("hemisphericLight",new A.P(0,1,0),n).intensity=.5,o=0,i=!0,c=!1,s=void 0;try{for(u=n.meshes[Symbol.iterator]();!(i=(l=u.next()).done);i=!0)(f=l.value).isVisible=!0,null===f.parent&&(o++,d=f.getHierarchyBoundingVectors(),p=Math.max(d.max.x-d.min.x,d.max.y-d.min.y,d.max.z-d.min.z),f.scaling.scaleInPlace(1/p),f.position=new A.P(10+o%10-5,0,Math.floor(o/10)-5))}catch(e){c=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(c)throw s}}h=n.transformNodes.slice(),b=!0,m=!1,y=void 0;try{for(v=h[Symbol.iterator]();!(b=(g=v.next()).done);b=!0)g.value.instantiateHierarchy()}catch(e){m=!0,y=e}finally{try{b||null==v.return||v.return()}finally{if(m)throw y}}T=!0,P=!1,R=void 0;try{for(S=n.textures.entries()[Symbol.iterator]();!(T=(x=S.next()).done);T=!0){var k;k=x.value,I=(E=function(e){if(Array.isArray(e))return e}(k)||function(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}}(k,2)||function(e,t){if(e){if("string"==typeof e)return ei(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ei(e,t)}}(k,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],O=E[1],function(e,t){var a=r.MeshBuilder.CreateGround("plane",{width:.9,height:.9},n),o=new r.StandardMaterial("material",n);o.emissiveTexture=e,o.disableLighting=!0,o.specularColor.scaleInPlace(0),a.position=t,a.material=o}(O,new A.P(I%10-5,0,Math.floor(I/10)-5))}}catch(e){P=!0,R=e}finally{try{T||null==S.return||S.return()}finally{if(P)throw R}}return[2,n]}})},(eu=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){ec(o,r,a,i,c,"next",e)}function c(e){ec(o,r,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}function el(e,t){var n=new L.x(e),a=new r.FreeCamera("camera1",new r.Vector3(0,5,-10),n);return a.setTarget(r.Vector3.Zero()),a.attachControl(),new r.HemisphericLight("light1",new r.Vector3(0,1,0),n).intensity=.7,r.MeshBuilder.CreateSphere("sphere",{diameter:2,segments:32},n).position.y=1,r.MeshBuilder.CreateGround("ground",{width:6,height:6},n),t(1,"Loaded default scene"),Promise.resolve(n)}var ef=n(4761),ed=n(60480),ep=n(11508);function eh(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function eb(e,t){return em.apply(this,arguments)}function em(){var e;return e=function(e,t){var n,a,o,i,c,s,u,l,f,d,p;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(h){switch(h.label){case 0:return(n=new L.x(e)).useRightHandedSystem=!0,n.defaultCursor="crosshair",[4,C(n)];case 1:return h.sent(),[4,(0,w.v)(function(e,n,r){t(e/n,"Loading ".concat(r))},n)];case 2:return a=h.sent(),o=new Z.cV,i=new ef.jH,(s=(c=ed.y.CreateDefault(n,a,i,o)).getActiveCamera()).minZ=.1,s.attachControl(),n.activeCamera=s,ep.m.setEnabled(!0),new j.e("hemi",A.P.Up(),n).intensity=1,u=r.MeshBuilder.CreateBox("box",{size:50},n),l=new r.SolidParticleSystem("boxes",n,{updatable:!1}),f=function(e,t){return Math.random()*(t-e)+e},l.addShape(u,1e4,{positionFunction:function(e){e.position=new A.P(f(-1,1),f(-1,1),f(-1,1)).scaleInPlace(5e3)}}),d=l.buildMesh(),(p=new r.PBRMetallicRoughnessMaterial("material",n)).baseColor=new r.Color3(.5,.5,.5),p.metallic=0,p.roughness=.5,d.material=p,u.setEnabled(!1),n.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;c.update(t)}),[2,n]}})},(em=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){eh(o,r,a,i,c,"next",e)}function c(e){eh(o,r,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}var ey=n(89662),ev=n(54944),eg=n(25254),ew=n(52209),eT=n(50312),eP=n(84490);function eR(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function eA(e,t){return eS.apply(this,arguments)}function eS(){var e;return e=function(e,t){var n,a,o,i,c,s,u,l,f,d,p,h,b;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(m){switch(m.label){case 0:return(n=new r.Scene(e)).useRightHandedSystem=!0,n.clearColor.setAll(0),[4,(0,et.j)(function(e,n,r){t(e/n,"Loading ".concat(r))},n)];case 1:return a=m.sent(),[4,C(n)];case 2:if(m.sent(),o=10*H.Z.EARTH_RADIUS,c=(i=new T.Q(n)).getActiveCamera(),i.speed=o,c.maxZ*=o,i.getTransform().setAbsolutePosition(new r.Vector3(0,1,-2).scaleInPlace(o)),i.getTransform().lookAt(r.Vector3.Zero()),c.attachControl(),n.enableDepthRenderer(null,!1,!0),s=new r.PointLight("light1",new r.Vector3(7,5,-10).scaleInPlace(o),n),u=new URLSearchParams(window.location.search).get("seed"),l=(0,ey.L)("gasPlanet",null!==u?Number(u):1e3*Math.random(),"Gas Planet",[]),f=new eP._(function(){return new eg.h(n)}),d=new eT.v(l,a,f,n),p=new ew.A(d.getTransform(),d.getBoundingRadius(),d.ringsUniforms,null,!1,[{getBoundingRadius:function(){return 0},getLight:function(){return s}}],n),c.attachPostProcess(p),h=new M.C(d.getTransform(),d.getBoundingRadius(),d.atmosphereUniforms,[s],n),c.attachPostProcess(h),!d.ringsUniforms)return[3,4];return b=new ev.e(d.getTransform(),d.ringsUniforms,l,[s],n),c.attachPostProcess(b),[4,new Promise(function(e){var t;(null==(t=d.ringsUniforms)?void 0:t.patternLut.type)==="procedural"&&d.ringsUniforms.patternLut.lut.getTexture().executeWhenReady(function(){e()})})];case 3:m.sent(),m.label=4;case 4:return n.onBeforeRenderObservable.add(function(){var e=n.getEngine().getDeltaTime()/1e3;i.update(e),d.updateMaterial([s],e);var t=i.getTransform().position.clone();i.getTransform().position=r.Vector3.Zero(),d.getTransform().position.subtractInPlace(t),s.position.subtractInPlace(t)}),t(1,"Rings scene loaded"),[2,n]}})},(eS=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){eR(o,r,a,i,c,"next",e)}function c(e){eR(o,r,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}var ex=n(54812),eE=n(49323),eC=n(32557),eI=n(91010),eO=n(96112);function e_(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function ek(e,t){return eL.apply(this,arguments)}function eL(){var e;return e=function(e,t){var n,a,o,i,c,s,u,l,f,d;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(p){switch(p.label){case 0:return n=new L.x(e),[4,(0,et.j)(function(e,n,r){t(e/n,"Loading ".concat(r))},n)];case 1:return a=p.sent(),(o=new r.FreeCamera("camera1",new r.Vector3(0,5,-10),n)).setTarget(r.Vector3.Zero()),o.attachControl(),i=new r.PointLight("light1",new r.Vector3(200,800,100),n),r.MeshBuilder.CreateSphere("lightSphere",{diameter:.1,segments:8},n).position=i.position,(c=r.MeshBuilder.CreateGround("ground",{width:32,height:32,subdivisions:4},n)).setEnabled(!1),(s=(0,eE.f)(n,5)).isVisible=!1,(u=new eC.B(n,a.noises,!1)).setPlanet(c),s.material=u,l=(0,ex.seededSquirrelNoise)(0),f=0,d=function(){return l(f++)},new eO.N((0,eI.ZX)(r.Vector3.Zero(),32,256,d)).createInstances([{mesh:s,distance:0}]),n.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;u.update([i],new r.Vector3(0,10,0),t)}),[2,n]}})},(eL=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){e_(o,r,a,i,c,"next",e)}function c(e){e_(o,r,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}var eD=n(85492),eM=n(49226),eN=n(97451);function ej(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function eB(e,t){return eV.apply(this,arguments)}function eV(){var e;return e=function(e,t){var n,r,a,o,i;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(c){switch(c.label){case 0:return(n=new L.x(e)).useRightHandedSystem=!0,[4,C(n)];case 1:return c.sent(),(a=(r=new T.Q(n)).getActiveCamera()).attachControl(),n.enableDepthRenderer(a,!1,!0),[4,(0,et.j)(function(e,n,r){t(e/n,"Loading ".concat(r))},n)];case 2:return o=c.sent(),new eD.O("sun",new A.P(1,-1,0),n).intensity=.7,i=new eN.$(eM.RD.Z,n,o.noises),n.onBeforeRenderObservable.add(function(){r.update(e.getDeltaTime()/1e3),i.update(e.getDeltaTime()/1e3)}),[2,n]}})},(eV=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){ej(o,r,a,i,c,"next",e)}function c(e){ej(o,r,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}var eZ=n(55272),eU=n(60892),eG=n(31872),eH=n(39745),eW=n(57420);function eF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ez=function(){var e;function t(e,n){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");eF(this,"_transform",void 0),eF(this,"model",void 0),eF(this,"type",void 0),eF(this,"boundingRadius",void 0),this._transform=e,this._transform.rotationQuaternion=A._f.Identity(),this.model=n,this.type=n.type;var r=this.getTransform().getHierarchyBoundingVectors();this.boundingRadius=r.max.subtract(r.min).length()/2}return e=[{key:"getTransform",value:function(){return this._transform}},{key:"getBoundingRadius",value:function(){return this.boundingRadius}},{key:"getTypeName",value:function(){return"Wrapped Orbital Object"}},{key:"dispose",value:function(){this.getTransform().dispose()}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}(),eq=n(47015);function eQ(e,t){var n=new L.x(e);n.useRightHandedSystem=!0;var r=new T.Q(n),a=r.getActiveCamera();a.minZ=.1,a.attachControl(),new j.e("hemi",A.P.Up(),n).intensity=1;var o=new ez(eZ.V.CreateSphere("sun",{diameter:1},n),{id:"sun",name:"Sun",orbit:{parentIds:[],argumentOfPeriapsis:0,semiMajorAxis:0,initialMeanAnomaly:0,longitudeOfAscendingNode:0,inclination:0,eccentricity:0,p:2},type:eG.o.CUSTOM,axialTilt:0,mass:1e12,siderealDaySeconds:0}),i=new ez(eZ.V.CreateSphere("earth",{diameter:.5},n),{id:"earth",name:"Earth",orbit:{parentIds:[o.model.id],argumentOfPeriapsis:0,semiMajorAxis:10,initialMeanAnomaly:0,longitudeOfAscendingNode:1.7,inclination:eU.w1.ToRadians(23.5),eccentricity:.5,p:2},type:eG.o.CUSTOM,axialTilt:eU.w1.ToRadians(23.5),mass:1e11,siderealDaySeconds:0}),c=new ez(eZ.V.CreateSphere("moon",{diameter:.2},n),{id:"moon",name:"Moon",orbit:{parentIds:[i.model.id],argumentOfPeriapsis:0,semiMajorAxis:3,initialMeanAnomaly:0,longitudeOfAscendingNode:0,inclination:i.model.orbit.inclination+i.model.axialTilt,eccentricity:.7,p:2},type:eG.o.CUSTOM,mass:1e10,axialTilt:0,siderealDaySeconds:0}),s=[o,i,c],u=new Map;u.set(i,[o]),u.set(c,[i]);var l=new eq.B;l.setOrbitalObjects(s,n),l.setVisibility(!0);var f=new eW.Y;f.setVisibility(!0),f.setOrbitalObjects(s,n);var d=A.y3.Identity(),p=A.y3.Identity(),h=0;return r.getTransform().setAbsolutePosition(new A.P(0,0,-10)),r.getTransform().lookAt(A.P.Zero()),n.onBeforeRenderObservable.add(function(){var t,n,a=e.getDeltaTime()/1e3;h+=a,r.update(a),A.y3.FromQuaternionToRef(null!=(n=null==(t=r.getTransform().rotationQuaternion)?void 0:t.clone().invertInPlace())?n:A._f.Identity(),p),r.getTransform().rotationQuaternion=A._f.Identity(),r.getTransform().computeWorldMatrix(!0),d.multiplyToRef(p,d),s.forEach(function(e){var t;(0,eH.PF)(e,null!=(t=u.get(e))?t:[],d,h),(0,eH.L$)(e,d,h)}),l.update(d)}),t(1,"Loading complete"),Promise.resolve(n)}var eY=n(21132);function eX(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function eJ(e,t){return e$.apply(this,arguments)}function e$(){var e;return e=function(e,t){var n,a,o,i,c,s,u,l,f,d;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(p){switch(p.label){case 0:return(n=new L.x(e)).useRightHandedSystem=!0,n.clearColor.set(0,0,0,1),a=1e7,i=(o=new T.Q(n)).getActiveCamera(),o.speed=a,i.maxZ*=a,o.getTransform().setAbsolutePosition(new r.Vector3(0,5,-10).scaleInPlace(a)),o.getTransform().lookAt(r.Vector3.Zero()),i.attachControl(),n.enableDepthRenderer(),(c=new r.PointLight("light1",new r.Vector3(-1,.5,-2).scaleInPlace(10*a),n)).intensity=.7,s=r.MeshBuilder.CreateSphere("sphere",{diameter:2*a,segments:32},n),u=new eP._(function(){return new eg.h(n)}),l={innerRadius:1.7*a,outerRadius:3.5*a,type:"procedural",seed:0,frequency:10,albedo:{r:120/255,g:112/255,b:104/255}},f=eY.fv.NewProcedural(l,u,0,n),[4,new Promise(function(e){"procedural"===f.patternLut.type&&f.patternLut.lut.getTexture().executeWhenReady(function(){e()})})];case 1:return p.sent(),d=new ev.e(s,f,{name:"Sphere",radius:+a},[c],n),i.attachPostProcess(d),n.onBeforeRenderObservable.add(function(){var e=n.getEngine().getDeltaTime()/1e3;o.update(e);var t=o.getTransform().position.clone();o.getTransform().position=r.Vector3.Zero(),s.position.subtractInPlace(t),c.position.subtractInPlace(t)}),t(1,"Rings scene loaded"),[2,n]}})},(e$=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){eX(o,r,a,i,c,"next",e)}function c(e){eX(o,r,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}function eK(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function e0(e){return{id:"jupiter",name:"Jupiter",type:eG.o.GAS_PLANET,radius:69911e3,mass:1898e24,axialTilt:eU.w1.ToRadians(3.13),siderealDaySeconds:35730,orbit:{parentIds:function(e){if(Array.isArray(e))return eK(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return eK(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eK(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),semiMajorAxis:7785472e5,eccentricity:.0934,inclination:eU.w1.ToRadians(1.85),longitudeOfAscendingNode:eU.w1.ToRadians(49.558),argumentOfPeriapsis:eU.w1.ToRadians(286.502),initialMeanAnomaly:0,p:2},atmosphere:{pressure:H.Z.BAR_TO_PASCAL,greenHouseEffectFactor:.7},colorPalette:{type:"textured",textureId:"jupiter"},rings:null,seed:0}}function e1(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function e2(e,t){return e3.apply(this,arguments)}function e3(){var e;return e=function(e,t){var n,a,o,i,c,s,u,l,f;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(d){switch(d.label){case 0:return(n=new r.Scene(e)).useRightHandedSystem=!0,n.clearColor.set(0,0,0,1),[4,(0,et.j)(function(e,n,r){t(e/n,"Loading ".concat(r))},n)];case 1:return a=d.sent(),[4,C(n)];case 2:return d.sent(),i=(o=new T.Q(n)).getActiveCamera(),o.speed=66e6,i.maxZ*=66e6,o.getTransform().setAbsolutePosition(new r.Vector3(0,1,-2).scaleInPlace(66e6)),o.getTransform().lookAt(r.Vector3.Zero()),i.attachControl(),n.enableDepthRenderer(null,!1,!0),(c=new r.PointLight("light1",new r.Vector3(7,5,-10).scaleInPlace(66e6),n)).falloffType=r.Light.FALLOFF_STANDARD,H.Z.EARTH_RADIUS=6371e3,s=e0([]),u=new eP._(function(){return new eg.h(n)}),l=new eT.v(s,a,u,n),f=new M.C(l.getTransform(),l.getBoundingRadius(),l.atmosphereUniforms,[c],n),i.attachPostProcess(f),n.onBeforeRenderObservable.add(function(){var e=n.getEngine().getDeltaTime()/1e3;o.update(e),l.getTransform().rotate(r.Axis.Y,.1*e),l.updateMaterial([c],e);var t=o.getTransform().position.clone();o.getTransform().position=r.Vector3.Zero(),l.getTransform().position.subtractInPlace(t),c.position.subtractInPlace(t)}),t(1,"Jupiter scene loaded"),[2,n]}})},(e3=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){e1(o,r,a,i,c,"next",e)}function c(e){e1(o,r,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}function e5(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function e6(e){return{id:"saturn",name:"Saturn",type:eG.o.GAS_PLANET,radius:58232e3,mass:5683e23,axialTilt:eU.w1.ToRadians(26.73),siderealDaySeconds:38361.6,orbit:{parentIds:function(e){if(Array.isArray(e))return e5(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return e5(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e5(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),semiMajorAxis:143344937e4,eccentricity:.0565,inclination:eU.w1.ToRadians(2.49),longitudeOfAscendingNode:eU.w1.ToRadians(113.715),argumentOfPeriapsis:eU.w1.ToRadians(336.092),initialMeanAnomaly:0,p:2},atmosphere:{pressure:H.Z.BAR_TO_PASCAL,greenHouseEffectFactor:.5},colorPalette:{type:"textured",textureId:"saturn"},rings:{innerRadius:74658e3,outerRadius:136775e3,type:"textured",textureId:"saturn"},seed:0}}function e4(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function e7(e,t){return e9.apply(this,arguments)}function e9(){var e;return e=function(e,t){var n,a,o,i,c,s,u,l,f,d,p,h,b;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(m){switch(m.label){case 0:return(n=new r.Scene(e)).useRightHandedSystem=!0,n.clearColor.set(0,0,0,1),[4,C(n)];case 1:return m.sent(),[4,(0,w.v)(function(e,n,r){t(e/n,"Loading ".concat(r))},n)];case 2:return a=m.sent(),i=(o=new T.Q(n)).getActiveCamera(),o.speed=96e6,i.maxZ*=96e6,o.getTransform().setAbsolutePosition(new r.Vector3(0,2,-2).scaleInPlace(96e6)),o.getTransform().lookAt(r.Vector3.Zero()),i.attachControl(),n.enableDepthRenderer(null,!1,!0),(c=new r.TransformNode("sun",n)).position=new r.Vector3(7,5.5,-10).scaleInPlace(96e6),(s=new r.PointLight("light1",r.Vector3.Zero(),n)).falloffType=r.Light.FALLOFF_STANDARD,s.parent=c,H.Z.EARTH_RADIUS=6371e3,u=e6([]),l=new eP._(function(){return new eg.h(n)}),f=new eT.v(u,a.textures,l,n),d=null,null!==u.rings&&(d=new P.K(0,f.getTransform(),u.rings.innerRadius,u.rings.outerRadius,n)),p=new ew.A(f.getTransform(),f.getBoundingRadius(),f.ringsUniforms,null,!1,[{getBoundingRadius:function(){return 0},getLight:function(){return s}}],n),i.attachPostProcess(p),h=new M.C(f.getTransform(),f.getBoundingRadius(),f.atmosphereUniforms,[s],n),i.attachPostProcess(h),null!==f.ringsUniforms&&(b=new ev.e(f.getTransform(),f.ringsUniforms,f.model,[s],n),i.attachPostProcess(b)),n.onBeforeRenderObservable.add(function(){var e=n.getEngine().getDeltaTime()/1e3;o.update(e),f.updateMaterial([s],e);var t=o.getTransform().position.clone();o.getTransform().position=r.Vector3.Zero(),f.getTransform().position.subtractInPlace(t),s.position.subtractInPlace(t),null==d||d.update(i.globalPosition,a.objects,e)}),t(1,"Jupiter scene loaded"),[2,n]}})},(e9=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){e4(o,r,a,i,c,"next",e)}function c(e){e4(o,r,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}var e8=n(22543),te=n(35263),tt=n(47779),tn=n(33778),tr=n(13833),ta=n(45825),to=n(52482),ti=n(84981),tc=n(32075);function ts(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function tu(e,t){return tl.apply(this,arguments)}function tl(){var e;return e=function(e,t){var n,a,o,i,c,s,u,l,f,d,p,h,b,m,y,v;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(g){switch(g.label){case 0:return(n=new tn.E(e)).useRightHandedSystem=!0,n.clearColor.set(0,0,0,1),[4,C(n)];case 1:return g.sent(),[4,(0,tc.L)()];case 2:return g.sent(),[4,(0,w.v)(function(e,n,r){t(e/n,"Loading ".concat(r))},n)];case 3:return a=g.sent(),i=(o=new T.Q(n)).getActiveCamera(),o.speed=66e6,i.maxZ*=66e6,[4,n.setActiveControls(o)];case 4:var P,R,A,S,x,E,I,O,_,k;return g.sent(),n.enableDepthRenderer(null,!1,!0),c=new ta.z(H.Z.VERTEX_RESOLUTION),s=new ti.F,[4,to.z.CreateAsync((P={id:"sun",name:"Sun",type:eG.o.STAR,radius:695508e3,mass:1989e27,blackBodyTemperature:5778,axialTilt:eU.w1.ToRadians(7.25),siderealDaySeconds:2217888,orbit:{parentIds:[],semiMajorAxis:0,eccentricity:0,p:2,inclination:0,longitudeOfAscendingNode:0,argumentOfPeriapsis:0,initialMeanAnomaly:0},rings:null,seed:0},R={id:"mercury",name:"Mercury",type:eG.o.TELLURIC_PLANET,radius:2439700,mass:3301e20,axialTilt:eU.w1.ToRadians(.034),siderealDaySeconds:5067014.4,waterAmount:0,temperature:{min:437,max:437},orbit:{parentIds:[P.id],semiMajorAxis:.38*H.Z.AU,eccentricity:.2056,p:2,inclination:eU.w1.ToRadians(7),longitudeOfAscendingNode:eU.w1.ToRadians(48.331),argumentOfPeriapsis:eU.w1.ToRadians(29.124),initialMeanAnomaly:0},terrainSettings:{continents_fragmentation:.1,continents_frequency:1,bumps_frequency:10,max_bump_height:15e3,max_mountain_height:0,continent_base_height:0,mountains_frequency:0},atmosphere:null,rings:null,clouds:null,ocean:null,seed:0},A={id:"venus",name:"Venus",type:eG.o.TELLURIC_PLANET,radius:6051800,mass:48e19,axialTilt:eU.w1.ToRadians(177.36),siderealDaySeconds:0x14064f0,waterAmount:0,temperature:{min:719,max:763},orbit:{parentIds:[P.id],semiMajorAxis:1082095e5,eccentricity:.0067,inclination:eU.w1.ToRadians(3.39),longitudeOfAscendingNode:eU.w1.ToRadians(76.68),argumentOfPeriapsis:eU.w1.ToRadians(54.88),initialMeanAnomaly:0,p:2},terrainSettings:{continents_fragmentation:.1,continents_frequency:1,bumps_frequency:10,max_bump_height:15e3,max_mountain_height:2e4,continent_base_height:0,mountains_frequency:5},rings:null,atmosphere:{pressure:93*H.Z.BAR_TO_PASCAL,greenHouseEffectFactor:.99},clouds:{layerRadius:6061800,smoothness:.7,specularPower:2,frequency:4,detailFrequency:12,coverage:0,sharpness:2.5,color:new e8.Wo(.8,.8,.1),worleySpeed:5e-4,detailSpeed:.003},ocean:null,seed:0},S={id:"earth",name:"Earth",type:eG.o.TELLURIC_PLANET,radius:6371e3,mass:5972e21,axialTilt:eU.w1.ToRadians(23.44),siderealDaySeconds:86400,waterAmount:1,temperature:{min:(0,te.P1)(-50),max:(0,te.P1)(50)},orbit:{parentIds:[P.id],semiMajorAxis:14959787e4,eccentricity:.0167,inclination:eU.w1.ToRadians(0),longitudeOfAscendingNode:eU.w1.ToRadians(0),argumentOfPeriapsis:eU.w1.ToRadians(114.20783),initialMeanAnomaly:0,p:2},terrainSettings:{continents_frequency:1,continents_fragmentation:.65,bumps_frequency:30,max_bump_height:1500,max_mountain_height:1e4,continent_base_height:19e3,mountains_frequency:360},rings:null,atmosphere:{pressure:+H.Z.BAR_TO_PASCAL,greenHouseEffectFactor:.5},clouds:{layerRadius:6401e3,smoothness:.7,specularPower:2,frequency:4,detailFrequency:12,coverage:.5,sharpness:2.5,color:new e8.Wo(.8,.8,.8),worleySpeed:5e-4,detailSpeed:.003},ocean:{depth:1e4},seed:0},x={id:"moon",name:"Moon",type:eG.o.TELLURIC_SATELLITE,radius:1737100,mass:7342e19,axialTilt:eU.w1.ToRadians(6.68),siderealDaySeconds:2360620.8,waterAmount:0,temperature:{min:100,max:100},orbit:{parentIds:[S.id],semiMajorAxis:3844e5,eccentricity:.0549,inclination:eU.w1.ToRadians(5.145),longitudeOfAscendingNode:eU.w1.ToRadians(125.08),argumentOfPeriapsis:eU.w1.ToRadians(318.15),initialMeanAnomaly:0,p:2},terrainSettings:{continents_fragmentation:.1,continents_frequency:1,bumps_frequency:10,max_bump_height:15e3,max_mountain_height:0,continent_base_height:0,mountains_frequency:0},atmosphere:null,clouds:null,ocean:null,seed:0},E={id:"mars",name:"Mars",type:eG.o.TELLURIC_PLANET,radius:3389500,mass:64171e19,axialTilt:eU.w1.ToRadians(25.19),siderealDaySeconds:88732.79999999999,waterAmount:0,temperature:{min:(0,te.P1)(-140),max:(0,te.P1)(20)},orbit:{parentIds:[P.id],semiMajorAxis:2279392e5,eccentricity:.0934,inclination:eU.w1.ToRadians(1.85),longitudeOfAscendingNode:eU.w1.ToRadians(49.558),argumentOfPeriapsis:eU.w1.ToRadians(286.502),initialMeanAnomaly:0,p:2},terrainSettings:{continents_fragmentation:.1,continents_frequency:1,bumps_frequency:10,max_bump_height:15e3,max_mountain_height:0,continent_base_height:0,mountains_frequency:0},atmosphere:{pressure:.006*H.Z.BAR_TO_PASCAL,greenHouseEffectFactor:.1},rings:null,clouds:null,ocean:null,seed:0},I=e0([P.id]),O=e6([P.id]),_={id:"uranus",name:"Uranus",type:eG.o.GAS_PLANET,radius:25362e3,mass:8681e22,axialTilt:eU.w1.ToRadians(97.77),siderealDaySeconds:3600*17.24,orbit:{parentIds:[P.id],semiMajorAxis:287246327e4,eccentricity:.0565,inclination:eU.w1.ToRadians(.77),longitudeOfAscendingNode:eU.w1.ToRadians(74.229),argumentOfPeriapsis:eU.w1.ToRadians(96.541),initialMeanAnomaly:0,p:2},colorPalette:{type:"textured",textureId:"uranus"},atmosphere:{pressure:.1*H.Z.BAR_TO_PASCAL,greenHouseEffectFactor:.5},rings:{innerRadius:50724e3,outerRadius:62e6,type:"textured",textureId:"uranus"},seed:0},k={id:"neptune",name:"Neptune",type:eG.o.GAS_PLANET,radius:24622e3,mass:1024e23,axialTilt:eU.w1.ToRadians(28.32),siderealDaySeconds:57996,orbit:{parentIds:[P.id],semiMajorAxis:449506e7,eccentricity:.0086,inclination:eU.w1.ToRadians(1.77),longitudeOfAscendingNode:eU.w1.ToRadians(131.72169),argumentOfPeriapsis:eU.w1.ToRadians(265.646853),initialMeanAnomaly:0,p:2},colorPalette:{type:"textured",textureId:"neptune"},atmosphere:{pressure:.1*H.Z.BAR_TO_PASCAL,greenHouseEffectFactor:.7},rings:null,seed:0},{name:"Sol",coordinates:{starSectorX:0,starSectorY:0,starSectorZ:0,localX:0,localY:0,localZ:0},stellarObjects:[P],planets:[R,A,S,E,I,O,_,k],satellites:[x],anomalies:[],orbitalFacilities:[]}),s,a,n)];case 5:(u=g.sent()).initPositions(2,c),l=u.getStellarObjects()[0],o.getTransform().position=l.getTransform().position.add(new r.Vector3(0,1,-2).scaleInPlace(7*l.getBoundingRadius())),o.getTransform().lookAt(l.getTransform().position),(f=new tt.O(a.textures,n)).addCelestialBodies(u.getCelestialBodies(),u.getStellarObjects()),d=new tr.V,p=!0,h=!1,b=void 0;try{for(m=u.getCelestialBodies()[Symbol.iterator]();!(p=(y=m.next()).done);p=!0)v=y.value,d.addObject(v)}catch(e){h=!0,b=e}finally{try{p||null==m.return||m.return()}finally{if(h)throw b}}return n.onBeforeRenderObservable.add(function(){var e=n.getEngine().getDeltaTime()/1e3;o.update(e),c.update(a),f.update(e),u.update(e,c),d.update(i)}),t(1,"Sol scene loaded"),[2,n]}})},(tl=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){ts(o,r,a,i,c,"next",e)}function c(e){ts(o,r,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}var tf=n(96948),td=n(47599),tp=n(92099),th=n(19346),tb=n(47608);function tm(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function ty(e,t){return tv.apply(this,arguments)}function tv(){var e;return e=function(e,t){var n,r,a,o,i,c,s,u,l,f,d;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(p){switch(p.label){case 0:return(n=new L.x(e)).useRightHandedSystem=!0,[4,C(n)];case 1:return p.sent(),[4,(0,w.v)(function(e,n,r){t(e/n,"Loading ".concat(r))},n)];case 2:return r=p.sent(),(a=new T.Q(n)).speed=2e3,(o=a.getActiveCamera()).maxZ=1e5*H.Z.EARTH_RADIUS,o.attachControl(),i=H.Z.AU,a.getTransform().setAbsolutePosition(new A.P(0,2,-3).normalize().scaleInPlace(4e4)),a.getTransform().lookAt(A.P.Zero()),c={starSectorX:0,starSectorY:0,starSectorZ:0,localX:0,localY:0,localZ:0},s=new tp.Z((0,tf.D)()).getSystemGalacticPosition(c),u={type:eG.o.STAR,id:"PGStar",name:"PG Star",blackBodyTemperature:5778,mass:H.Z.SOLAR_MASS,radius:H.Z.SOLAR_RADIUS,orbit:{p:2,argumentOfPeriapsis:0,semiMajorAxis:0,eccentricity:0,longitudeOfAscendingNode:0,inclination:0,initialMeanAnomaly:0,parentIds:[]},siderealDaySeconds:0,axialTilt:0,seed:0,rings:null},(l=new tb.U(u,r.textures,n)).getTransform().position=new A.P(7,2,5).normalize().scaleInPlace(i),(f=(0,td.z)("station",Math.random()*H.Z.SEED_HALF_RANGE,c,s,[u])).orbit.semiMajorAxis=i,d=new th.f(f,new Map([[u,i]]),r,n),n.onBeforePhysicsObservable.add(function(){var t=e.getDeltaTime()/1e3;a.update(t);var n=o.globalPosition;d.update([l],n,t)}),[2,n]}})},(tv=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){tm(o,r,a,i,c,"next",e)}function c(e){tm(o,r,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}var tg=n(46060),tw=n(70620),tT=n(80316);function tP(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function tR(e,t){return tA.apply(this,arguments)}function tA(){var e;return e=function(e,t){var n,r,a,o,i,c,s,u,l,f,d,p,h;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(b){switch(b.label){case 0:return(n=new L.x(e)).useRightHandedSystem=!0,[4,C(n)];case 1:return b.sent(),[4,(0,tc.L)()];case 2:return b.sent(),[4,(0,w.v)(function(e,n,r){t(e/n,"Loading ".concat(r))},n)];case 3:if(r=b.sent(),a=new Z.cV,o=new ef.jH,i=new tp.Z((0,tf.D)()),void 0===(s=(c=tw.J.Default(i)).serializedSpaceships.shift()))throw Error("No spaceship found in player data");if(u=U.O.Deserialize(s,c.spareSpaceshipComponents,n,r,a),c.instancedSpaceships.push(u),(l=new ed.y(u,n,a,o).thirdPersonCamera).attachControl(),n.activeCamera=l,f=i.fallbackSystem,d=new tg.t,p=new tT.L(c,d,i,a),void 0===(h=f.orbitalFacilities[0]))throw Error("No station found in system model");return p.setStation(h,[],c),p.setVisibility(!0),[2,n]}})},(tA=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){tP(o,r,a,i,c,"next",e)}function c(e){tP(o,r,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}var tS=n(87158),tx=n(70618);function tE(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function tC(e,t){return tI.apply(this,arguments)}function tI(){var e;return e=function(e,t){var n,r,a,o,i;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(c){switch(c.label){case 0:return[4,(0,tc.L)()];case 1:return c.sent(),n=new tp.Z((0,tf.D)()),r=tw.J.Default(n),a=new tS.O(n),o=new Z.cV,(i=new tx.s(r,e,a,n,o)).setCurrentStarSystem(n.fallbackSystem.coordinates),t(1,"Loaded star map"),[2,i.scene]}})},(tI=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){tE(o,r,a,i,c,"next",e)}function c(e){tE(o,r,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}var tO=n(76929),t_=n(67810),tk=n(6478),tL=n(74667),tD=n(62341),tM=n(24660);function tN(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function tj(e,t){return tB.apply(this,arguments)}function tB(){var e;return e=function(e,t){var n,r,a,o,i,c,s,u,l;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(f){switch(f.label){case 0:return[4,(0,tc.L)()];case 1:var d,p,h,b,m,y,v;return f.sent(),n=new tp.Z((d={starSectorX:0,starSectorY:1,starSectorZ:0,localX:0,localY:0,localZ:0},(p=(0,tO.dD)("star0",420,"Weierstrass",[])).blackBodyTemperature=5778,(h=(0,t_.$)("hecate",253,"H\xe9cate",[p])).temperature.min=(0,te.P1)(-40),h.temperature.max=(0,te.P1)(30),h.orbit.semiMajorAxis=21e3*h.radius,b=(0,td.z)("hecate->station",0,d,A.P.Zero(),[h]),(m=(0,tk.u)("hecate->manaleth",23,"Manaleth",[h])).orbit.inclination=eU.w1.ToRadians(45),m.orbit.semiMajorAxis=(0,te.at)(m.siderealDaySeconds,h.mass),null!==(y=(0,t_.$)("ares",.3725,"Ares",[p])).clouds&&(y.clouds.coverage=1),null!==y.atmosphere&&(y.atmosphere.pressure=.5*H.Z.EARTH_SEA_LEVEL_PRESSURE),y.orbit.semiMajorAxis=25100*h.radius,(v=(0,ey.L)("andromaque",.28711440474126226,"Andromaque",[p])).orbit.semiMajorAxis=25300*h.radius,v.orbit.eccentricity=.8,{name:"Alpha Testis",coordinates:d,stellarObjects:[p],planets:[h,y,v],satellites:[m],anomalies:[],orbitalFacilities:[b]})),r=tw.J.Default(n),a=new tg.t,o=new Z.cV,i=new ef.jH,(c=new tn.E(e)).useRightHandedSystem=!0,[4,C(c)];case 2:return s=f.sent(),[4,(0,w.v)(function(e,n,r){t(e/n,"Loading ".concat(r))},c)];case 3:return u=f.sent(),[4,(l=new tL.p(c,r,e,s,a,n,o,i,u)).resetPlayer()];case 4:return f.sent(),[4,l.switchToSpaceshipControls()];case 5:return f.sent(),[4,l.loadStarSystem(n.fallbackSystem)];case 6:return f.sent(),l.initStarSystem(),(0,tM.pl)(l.getSpaceshipControls(),l.getStarSystem().getStellarObjects()[0],l.getStarSystem()),c.onBeforeRenderObservable.add(function(){var e=c.getEngine().getDeltaTime()/1e3;(0,tD.BX)(e)}),[2,l.scene]}})},(tB=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){tN(o,r,a,i,c,"next",e)}function c(e){tN(o,r,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}var tV=n(43011),tZ=n(14280),tU=n(58451),tG=n(17769),tH=n(2059);function tW(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function tF(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){tW(o,r,a,i,c,"next",e)}function c(e){tW(o,r,a,i,c,"throw",e)}i(void 0)})}}function tz(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}function tq(e,t){return tQ.apply(this,arguments)}function tQ(){return(tQ=tF(function(e,t){var n,r,a,o,i,c,s;return tz(this,function(u){switch(u.label){case 0:return(n=new L.x(e)).useRightHandedSystem=!0,[4,C(n)];case 1:return u.sent(),[4,(0,et.j)(function(e,n){t(e/n,"Loading textures")},n)];case 2:return r=u.sent(),(a=new T.Q(n)).speed=2e6,(o=a.getActiveCamera()).attachControl(),n.activeCamera=o,n.enableDepthRenderer(o,!1,!0),new tU.S(r.environment.milkyWay,n),i=(0,tV.sL)("blackHole",42,"Black Hole Demo",[]),(c=new tG.s(i,r.environment.milkyWay,n)).getTransform().position=new A.P(0,-.2,1).scaleInPlace(20*c.getRadius()),s=new tH.z(c.getTransform(),c.blackHoleUniforms,n),o.attachPostProcess(s),o.maxZ=1e12,a.getTransform().lookAt(c.getTransform().position),n.onBeforePhysicsObservable.add(function(){var t=e.getDeltaTime()/1e3,n=a.update(t);(0,tZ.Iu)(a.getTransform(),n.negate()),(0,tZ.Iu)(c.getTransform(),n.negate()),s.update(t)}),document.addEventListener("click",tF(function(){var e;return tz(this,function(t){switch(t.label){case 0:if(null!==document.pointerLockElement)return[3,2];return[4,null==(e=a.getActiveCamera().getEngine().getRenderingCanvas())?void 0:e.requestPointerLock()];case 1:t.sent(),t.label=2;case 2:return[2]}})})),t(1,"Black Hole Scene Loaded"),[2,n]}})})).apply(this,arguments)}var tY=n(73529),tX=n(65681),tJ=n(16890),t$=n(82659),tK=n(62632),t0=n(44356);function t1(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function t2(e,t){return t3.apply(this,arguments)}function t3(){var e;return e=function(e,t){var n,a,o,i,c,s,u,l,f;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(d){switch(d.label){case 0:return(n=new L.x(e)).useRightHandedSystem=!0,[4,C(n)];case 1:return d.sent(),[4,(0,et.j)(function(e,n,r){t(e/n,"Loading ".concat(r))},n)];case 2:return a=d.sent(),(o=new T.Q(n)).speed=2e3,(i=o.getActiveCamera()).attachControl(),n.activeCamera=i,n.enableDepthRenderer(i,!1,!0),c=(0,tY.L)("neutronStar",456,"Neutron Star Demo",[]),(s=new tK.R(c,a,n)).getTransform().position=new A.P(0,0,1).scaleInPlace(2e6*s.getRadius()),u=new t$.X(s.mesh,s.volumetricLightUniforms,[],n),i.attachPostProcess(u),l=new tJ.J(s.getTransform(),s.getRadius(),s.model.dipoleTilt,n),i.attachPostProcess(l),f=new tX.i(s.getTransform(),s.getRadius(),(0,t0.y)(c.blackBodyTemperature),n),i.attachPostProcess(f),i.maxZ=1e12,o.getTransform().lookAt(s.getTransform().position),n.onBeforePhysicsObservable.add(function(){var t=e.getDeltaTime()/1e3,n=o.update(t);s.getTransform().rotate(r.Axis.Y,2*Math.PI*t/c.siderealDaySeconds),(0,tZ.Iu)(o.getTransform(),n.negate()),(0,tZ.Iu)(s.getTransform(),n.negate()),l.update(t)}),t(1,"Neutron Star Scene Loaded"),[2,n]}})},(t3=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){t1(o,r,a,i,c,"next",e)}function c(e){t1(o,r,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}var t5=n(19577),t6=n(86950),t4=n(24432),t7=n(16050),t9=n(31328);function t8(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function ne(e,t){return nt.apply(this,arguments)}function nt(){var e;return e=function(e,t){var n,a,o,i;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(c){switch(c.label){case 0:return n=new L.x(e),(a=new r.FreeCamera("camera1",new r.Vector3(0,5,-10),n)).setTarget(r.Vector3.Zero()),a.attachControl(),[4,(0,tc.L)()];case 1:switch(c.sent(),o=new t5.b(new Z.cV),document.body.appendChild(o.root),null!=(i=new URLSearchParams(window.location.search).get("tutorial"))?i:"flight"){case"flight":return[3,2];case"fuelScoop":return[3,4];case"stationLanding":return[3,6];case"starMap":return[3,8]}return[3,10];case 2:return[4,o.setTutorial(new t6.d)];case 3:case 5:case 7:case 9:return c.sent(),[3,10];case 4:return[4,o.setTutorial(new t4.L)];case 6:return[4,o.setTutorial(new t9.b)];case 8:return[4,o.setTutorial(new t7.D)];case 10:return t(1,"Loaded tutorial"),[2,n]}})},(nt=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){t8(o,r,a,i,c,"next",e)}function c(e){t8(o,r,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}var nn=n(71351);function nr(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function na(e,t){return no.apply(this,arguments)}function no(){var e;return e=function(e,t){var n,a,o,i,c;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(s){switch(s.label){case 0:return(n=new L.x(e)).useRightHandedSystem=!0,o=(a=new T.Q(n)).getActiveCamera(),[4,C(n)];case 1:return s.sent(),(i=r.MeshBuilder.CreateBox("Anchor",{size:10},n)).position.z=200,(c=new nn.u(n)).setThrottle(1),c.getTransform().parent=i,n.onBeforeRenderObservable.add(function(){var t=e.getDeltaTime()/1e3;c.update(t),a.update(t),i.position.z+=2e3*t,a.getTransform().position.z+=2e3*t;var n=o.globalPosition;i.position.subtractInPlace(n),a.getTransform().position.subtractInPlace(n)}),t(1,"Warp tunnel scene loaded"),[2,n]}})},(no=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){nr(o,r,a,i,c,"next",e)}function c(e){nr(o,r,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}function ni(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function nc(e,t){return ns.apply(this,arguments)}function ns(){var e;return e=function(e,t){var n,c,l,p,m;function g(t){n.cameras.forEach(function(e){return e.attachPostProcess(t)}),n.onNewCameraAddedObservable.add(function(e){e.attachPostProcess(t)}),n.onBeforeRenderObservable.add(function(){var n=e.getDeltaTime()/1e3;t.update(n)})}return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){var u=[c,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}(this,function(w){switch(w.label){case 0:var T,P,R,S,x,E,C,I,O,_;return((n=new L.x(e)).useRightHandedSystem=!0,c=new URLSearchParams(window.location.search),(l=new r.ArcRotateCamera("ArcRotateCamera",0,3.14/3,5,A.P.Zero(),n)).attachControl(),l.lowerRadiusLimit=.5,l.wheelPrecision*=100,l.minZ=.01,p=n.enableDepthRenderer(null,!1,!0),"mandelbulb"===(m=c.get("fractal")))?(T=(0,f.i)("mandelbulb",1e5*Math.random(),"XR Anomaly",[]),(P=new i.W(T,n)).getTransform().scalingDeterminant=1/4e5,g(new d.C(P.getTransform(),P.getBoundingRadius(),T,n,[])),P.getTransform()):"julia"===m?(R=(0,a.c)("julia",1e5*Math.random(),"XR Anomaly",[]),(S=new i.W(R,n)).getTransform().scalingDeterminant=1/4e5,g(new o.v(S.getTransform(),S.getBoundingRadius(),R.accentColor,n,[])),S.getTransform()):"mandelbox"===m?(x=(0,s.i)("mandelbox",1e5*Math.random(),"XR Anomaly",[]),(E=new i.W(x,n)).getTransform().scalingDeterminant=1e-5,g(new u.m(E.getTransform(),E.getBoundingRadius(),x,n,[])),E.getTransform()):"pyramid"===m?(C=(0,y.q)("sierpinski",1e5*Math.random(),"XR Anomaly",[]),(I=new i.W(C,n)).getTransform().scalingDeterminant=1e-5,g(new v.U(I.getTransform(),I.getBoundingRadius(),C,n,[])),I.getTransform()):(O=(0,h.$)("menger",1e5*Math.random(),"XR Anomaly",[]),(_=new i.W(O,n)).getTransform().scalingDeterminant=1e-5,g(new b.x(_.getTransform(),_.getBoundingRadius(),O,n,[])),_.getTransform()),[4,n.createDefaultXRExperienceAsync()];case 1:return w.sent().baseExperience.camera.setTransformationFromNonVRCamera(l,!0),n.onBeforeCameraRenderObservable.add(function(e){p.getDepthMap().activeCamera=e}),t(1,"Loading complete"),[2,n]}})},(ns=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){ni(o,r,a,i,c,"next",e)}function c(e){ni(o,r,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}var nu=function(){var e;function t(){var e;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");e=new Map([["orbitalDemo",eQ],["tunnel",eB],["automaticLanding",F],["debugAssets",es],["spaceStation",ty],["spaceStationUI",tR],["xr",nc],["flightDemo",eb],["neutronStar",t2],["character",$],["starMap",tC],["tutorial",ne],["asteroidField",_],["starSystemView",tj],["rings",eJ],["sierpinski",g],["mandelbox",l],["mandelbulb",p],["juliaSet",c],["mengerSponge",m],["atmosphericScattering",N],["darkKnight",ea],["blackHole",tq],["gasPlanet",eA],["jupiter",e2],["saturn",e7],["sol",tu],["grass",ek],["warpTunnel",na]]),"map"in this?Object.defineProperty(this,"map",{value:e,enumerable:!0,configurable:!0,writable:!0}):this.map=e}return e=[{key:"register",value:function(e,t){this.map.set(e,t)}},{key:"get",value:function(e){var t;return null!=(t=this.map.get(e))?t:el}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}()},91822:function(e,t,n){n.d(t,{Z:()=>r});function r(e,t,n){return(0x466f45d*e^0x127409f*t^0x4f9ffb7*n)%1e9}},31796:function(e,t,n){n.d(t,{CW:()=>i,Ec:()=>u,Qc:()=>f,a2:()=>s,oZ:()=>l,p5:()=>c,r_:()=>o,th:()=>function e(t,n){return 0===n?t:e(n,t%n)},uZ:()=>a});var r=n(51971);function a(e,t,n){return Math.min(Math.max(e,t),n)}function o(e,t,n){return e>t?Math.max(t,e-n):Math.min(t,e+n)}function i(e,t,n){var r=Math.min(1,Math.max(0,(n-e)/(t-e)));return r*r*(3-2*r)}function c(e){return 2*Math.abs(e-Math.floor(e+.5))}function s(e,t,n,r,a){return r+(e-t)*(a-r)/(n-t)}function u(e,t,n,r){return t+(e-t)*Math.pow(2,-r/n)}function l(e,t,n,a,o){return r._f.SlerpToRef(e,t,Math.pow(2,-a/n),o)}function f(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=t,a=0;a<n;a++){var o=e(r);if(1e-8>Math.abs(o))break;var i=(e(r+1e-4)-o)/1e-4;r-=o/i}return r}},24660:function(e,t,n){n.d(t,{pl:()=>a}),n(68645);var r=n(51971);function a(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o=function(e,t){var n=-1,r=t[0];if(void 0===r)throw Error("no bodieees !");var a=!0,o=!1,i=void 0;try{for(var c,s=t[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var u=c.value,l=e.subtract(u.getTransform().getAbsolutePosition()).length();(-1===n||l<n)&&(r=u,n=l)}}catch(e){o=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(o)throw i}}return r}(t.getTransform().getAbsolutePosition(),n.getStellarObjects());if(o===t)e.getTransform().setAbsolutePosition(t.getTransform().getAbsolutePosition().add(new r.P(0,.2,1).scaleInPlace(t.getBoundingRadius()*a)));else{var i=t.getTransform().getAbsolutePosition().subtract(o.getTransform().getAbsolutePosition()),c=i.length();i.scaleInPlace(1/c);var s=o.getTransform().getAbsolutePosition().add(i.scale(c-a*t.getBoundingRadius()));e.getTransform().setAbsolutePosition(s)}n.translateEverythingNow(e.getTransform().getAbsolutePosition().negate()),e.getTransform().setAbsolutePosition(r.P.Zero()),e.getTransform().lookAt(t.getTransform().getAbsolutePosition())}n(14280)},91307:function(e,t,n){function r(e,t){var n=[];if(e.children.forEach(function(e,r){if("x"!==r&&"y"!==r){var a,o,i=e.name;i=i.replace("key:",""),i=null!=(o=null==t||null==(a=t.get(i))?void 0:a.toUpperCase())?o:i,n.push([r,i])}}),void 0===n[0]||void 0===n[1]||void 0===n[2]||void 0===n[3])throw Error("DPadComposite keys are undefined");return[n[2],n[0],n[3],n[1]]}function a(e,t){var n=[];return e.children.forEach(function(e,r){var a,o,i=e.name;i=i.replace("key:",""),i=null!=(o=null==t||null==(a=t.get(i))?void 0:a.toUpperCase())?o:i,n.push([r,i])}),n}function o(e,t){return e.action.bindings.map(function(e){var n,r,a,o;return n=e.control,o=(o=n.name).replace("key:",""),o=null!=(a=null==t||null==(r=t.get(o))?void 0:r.toUpperCase())?a:o})}n.d(t,{C9:()=>a,cs:()=>r,gW:()=>o})}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,(()=>{var e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},o=n=>n.map(n=>{if(null!==n&&"object"==typeof n){if(n[e])return n;if(n.then){var o=[];o.d=0,n.then(e=>{i[t]=e,a(o)},e=>{i[r]=e,a(o)});var i={};return i[e]=e=>e(o),i}}var c={};return c[e]=function(){},c[t]=n,c});n.a=(n,i,c)=>{c&&((s=[]).d=-1);var s,u,l,f,d=new Set,p=n.exports,h=new Promise((e,t)=>{f=t,l=e});h[t]=p,h[e]=e=>{s&&e(s),d.forEach(e),h.catch(function(){})},n.exports=h,i(n=>{u=o(n);var a,i=()=>u.map(e=>{if(e[r])throw e[r];return e[t]}),c=new Promise(t=>{(a=()=>t(i)).r=0;var n=e=>e!==s&&!d.has(e)&&(d.add(e),e&&!e.d&&(a.r++,e.push(a)));u.map(t=>t[e](n))});return a.r?c:i()},e=>(e?f(h[r]=e):l(p),a(s))),s&&s.d<0&&(s.d=0)}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.k=e=>""+e+".css",n.u=e=>""+e+"."+({1098:"47c96d7cb837d5fc",1112:"52e00a662903fe65",1245:"32964cae5ceebb63",1264:"7ed31c17618f66b3",1326:"815013edc9a48b4c",1499:"edaf1e6180cbcd23",1502:"43ebd451f71928a8",1554:"28aa99d87ac16ea0",1556:"1d2f202f7733e632",1716:"fc28f5ea43e9bb7b",1863:"0a87b7deeca5767e",1866:"8c6422420e97eca3",1953:"2619e09be46dbb7f",1979:"8e1b1a63a823e591",2125:"2e09b45893bd64ee",2166:"df18388456625f41",2195:"b1dd53356f5209f9",225:"18ab91ea2b304a49",2257:"2dc761321553345a",2268:"c97330c878963458",2292:"4c55df9cc06dd085",2379:"0839d5f2a1306a90",2385:"c5547cc5df781ce1",2404:"17798c407df2d8e5",2406:"5758cdfa71cb1262",2474:"639bc44bc2bd235f",2563:"42192c1f519b3c53",2750:"c7766fc3732f5f94",2789:"71b089e5785cb001",2814:"70deb7cd1bacb99b",2819:"645bee88ea024e10",2891:"695e435da3d12afe",2947:"aa1d5f9a100079c6",2978:"5e175aed2ad160c4",3012:"ff6908bb7b4888ec",3032:"3742f706549d1b2e",3084:"7c1cb5af2a3658d2",3091:"521cbb6906942df4",3109:"9c0e00bd02096e5a",3157:"7ad9818f97c3ef7c",3197:"efbdd0864966992f",3207:"87b70a0cf7dc75ac",3213:"7943f3b74cee3d59",3246:"63d9f2563f9a549b",3492:"5e4288f0c505583d",354:"26e8bea849dd7a1b",3609:"42b3229bf7c812ed",3612:"6553c0724873fa03",362:"9ddfed71fe43bcc1",3627:"7afc32e031ee9204",374:"2f2ca8de727e85c2",3802:"6c1d019f2f95f438",3827:"c65e694b93f6865c",3855:"90ac1da3970b3386",3867:"4339605a2b14fd2f",3878:"fe203c0e35b2b197",3882:"4850e20e5bd9dec1",3887:"e828ca1de926eae8",393:"ac34eee3414ab52d",40:"3f83b5c483aaaa50",4010:"50965c38bfec62d5",4089:"628df5acb7bf28c4",4126:"207e7967dc1d91c9",417:"e711d30661e5eeb2",4233:"db2ebaba08c750da",4234:"f37bc3556648128b",4235:"da5eb776980826e6",4269:"7c5bf0172adb5177",4290:"6e26bd301ab73777",4333:"f8d9d6347f6eb0c5",4391:"8a3a4abf58a0f064",444:"1993666983d19562",4511:"dd69048d5133ca18",4540:"c3a3fdc6a1f56d9b",4632:"6ad08f3a76759a81",4646:"5719952ff27886dc",4716:"32caaa372386817a",5006:"94c41dce8d2336e4",5067:"22b3a22b737fc142",5119:"e87d2eb1e3d73945",5188:"3256a7c571b87e46",5227:"8242af4a14e52eac",5268:"5ebccf706d0c17d6",5276:"2060d42d66630675",537:"36fed3afdb84260e",5370:"a949155dbc9704c3",5461:"ad0cd10b165aa533",5773:"feaa0a7aa73d7b92",590:"214e7927a455dbeb",5923:"8163c897b678e989",5970:"43ab88ef9c6b9653",5982:"41351bd7c0e39a25",6010:"74b85b0c49f30f20",6039:"4e2edc2d15c63e04",6121:"06b554efccd3e2fc",619:"71dacf28b58d47d2",6313:"85f2c0cf46fa8449",6344:"894216915c735b09",6383:"1abaf85edd25ba19",651:"cf4df10517dc7470",6545:"7a5e4819535c1653",6546:"3d5ee65e142fbd86",6652:"9b4773ef6371971c",6675:"67a65958e720e129",6764:"0d284fc89cfa72dc",6801:"00562b50de58769f",6844:"698dbc63363b0e4e",6876:"5eb3e65ea05c0dcf",6920:"be7e08208de8a08a",6965:"69baa9990e8a2e07",7e3:"aadb929158586f18",7105:"690b6b073bdd6946",7202:"1cff8b2a26b21142",7205:"71e54a46eb5c435a",725:"33c60c5af5ebbb00",7377:"c121fc8600287a7f",7417:"227835f2ecd02cbc",7418:"d4cbf06580437fcd",7458:"6dac7e7a314fd668",7606:"fe5e4cc380333e93",788:"1b53e0e36ce9162c",7908:"25e2c13df5b547fb",7966:"22a870cc230de5bb",7980:"a8aebeb72bfc947d",7999:"32aa2277c903d4cb",8062:"c068e464c719f9fc",8220:"a747ffa548a8a89d",8362:"a909dd7df039f6fa",8363:"19cfd92c65272c27",846:"92b0d1598e895399",854:"6a2231dea0f61153",8824:"8e7e10f178b60420",8893:"1927e1eb8294da9c",9121:"670754c79c402be0",9122:"f638304ae9a4819e",9149:"cd2da8d0d4a59a84",9182:"1a2b2b774c7e7744",9242:"6ab0902ebb9f8578",9258:"af60f456d793688c",9379:"c8cb966fc656ad51",9432:"9e2e3d31c31e07db",9510:"9d20d9bac39ebc81",9531:"e3c26fea3409ef2e",9575:"ebb886b2a8d7e669",9646:"95b26053089eac28",9667:"52b48f55a3d62de3",9702:"d0a05dc539a9877e",9843:"9852e31eb8b3a3a5",9917:"95d03eccb42dd669",9938:"500fe62d8de54371",9964:"1d072f0ec9dd1195",9973:"5b2462d2a9bee464"})[e]+".js",n.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="cosmos-journeyer:";n.l=function(r,a,o,i){if(e[r])return void e[r].push(a);if(void 0!==o)for(var c,s,u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var f=u[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+o){c=f;break}}c||(s=!0,(c=document.createElement("script")).charset="utf-8",c.timeout=120,n.nc&&c.setAttribute("nonce",n.nc),c.setAttribute("data-webpack",t+o),c.src=r),e[r]=[a];var d=function(t,n){c.onerror=c.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],c.parentNode&&c.parentNode.removeChild(c),a&&a.forEach(function(e){return e(n)}),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=d.bind(null,c.onerror),c.onload=d.bind(null,c.onload),s&&document.head.appendChild(c)}})(),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=[];n.O=(t,r,a,o)=>{if(r){o=o||0;for(var i=e.length;i>0&&e[i-1][2]>o;i--)e[i]=e[i-1];e[i]=[r,a,o];return}for(var c=1/0,i=0;i<e.length;i++){for(var[r,a,o]=e[i],s=!0,u=0;u<r.length;u++)(!1&o||c>=o)&&Object.keys(n.O).every(e=>n.O[e](r[u]))?r.splice(u--,1):(s=!1,o<c&&(c=o));if(s){e.splice(i--,1);var l=a();void 0!==l&&(t=l)}}return t}})(),n.rv=()=>"1.3.7",(()=>{n.g.importScripts&&(e=n.g.location+"");var e,t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var a=r.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=r[a--].src}if(!e)throw Error("Automatic publicPath is not supported in this browser");n.p=e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/")})(),(()=>{var e={5041:0},t="cosmos-journeyer",r=(t,n)=>{e[n]=0},a="data-webpack-loading",o=function(e,r,o,i,c){var s,u,l="chunk-"+e;if(!i){for(var f=document.getElementsByTagName("link"),d=0;d<f.length;d++){var p=f[d],h=p.getAttribute("href")||p.href;if(h&&!h.startsWith(n.p)&&(h=n.p+(h.startsWith("/")?h.slice(1):h)),"stylesheet"==p.rel&&(h&&h.startsWith(r)||p.getAttribute("data-webpack")==t+":"+l)){s=p;break}}if(!o)return s}s||(u=!0,s=document.createElement("link"),n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+":"+l),c&&s.setAttribute("fetchpriority",c),s.setAttribute(a,1),s.rel="stylesheet",s.href=r);var b=function(e,t){if(s.onerror=s.onload=null,s.removeAttribute(a),clearTimeout(m),t&&"load"!=t.type&&s.parentNode.removeChild(s),o(t),e)return e(t)};if(s.getAttribute(a)){var m=setTimeout(b.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=b.bind(null,s.onerror),s.onload=b.bind(null,s.onload)}else b(void 0,{type:"load",target:s});return i?document.head.insertBefore(s,i):u&&document.head.appendChild(s),s};r(n.m,0,"5041"),n.f.css=function(t,a,i){var c=n.o(e,t)?e[t]:void 0;if(0!==c)if(c)a.push(c[2]);else if(5041==t){var s=new Promise(function(n,r){c=e[t]=[n,r]});a.push(c[2]=s);var u=n.p+n.k(t),l=Error();o(t,u,function(a){if(n.o(e,t)&&(0!==(c=e[t])&&(e[t]=void 0),c))if("load"!==a.type){var o=a&&a.type,i=a&&a.target&&a.target.src;l.message="Loading css chunk "+t+" failed.\n("+o+": "+i+")",l.name="ChunkLoadError",l.type=o,l.request=i,c[1](l)}else r(n.m,t),c[0]()},void 0,i)}else e[t]=0}})(),(()=>{n.b=document.baseURI||self.location.href;var e={8308:0};n.f.j=function(t,r){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var o=new Promise((n,r)=>a=e[t]=[n,r]);r.push(a[2]=o);var i=n.p+n.u(t),c=Error();n.l(i,function(r){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;c.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",c.name="ChunkLoadError",c.type=o,c.request=i,a[1](c)}},"chunk-"+t,t)}},n.O.j=t=>0===e[t];var t=(t,r)=>{var a,o,[i,c,s]=r,u=0;if(i.some(t=>0!==e[t])){for(a in c)n.o(c,a)&&(n.m[a]=c[a]);if(s)var l=s(n)}for(t&&t(r);u<i.length;u++)o=i[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(l)},r=globalThis.webpackChunkcosmos_journeyer=globalThis.webpackChunkcosmos_journeyer||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.ruid="bundler=rspack@1.3.7";var r=n.O(void 0,["8146","2343","3530","754","1416","3942","6962","8314","3480","2027","2961","3793","7858","5650","8514","263","8251","6449","4034","3859","9129","971","7775","5041"],function(){return n(18722)});r=n.O(r)})();